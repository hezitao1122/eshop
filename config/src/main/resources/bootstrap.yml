#内置端口号
server:
    port: 58013
tomcat:
    uri-encoding: UTF-8

spring:
  application:
    name: amap-config
  profiles:
    #使用配置文件格式
#    active: native
    #使用jdbc模式
    active: jdbc
  # 配置中心
  cloud:
    config:
      server:
        prefix: /amap-config
        jdbc:
          sql:  SELECT p_key, p_value  FROM property where application = :1  and profile = :2 and label = :3
          evnSql: SELECT ep.p_key, ep.p_value FROM ENV_PARAM ep join env e on ep.ENV_ID = e.ID where e.NAME = ?
  #数据源相关配置
  datasource:
    url: jdbc:oracle:thin:@192.9.200.96:1521:cdb1
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: oracle.jdbc.driver.OracleDriver
    username: C##AMAP
    password: amap
    #验证连接的有效性
    test-while-idle: true
    #空闲连接回收的时间间隔，与test-while-idle一起使用，设置5分钟
    time-between-eviction-runs-millis: 300000
    #连接池空闲连接的有效时间 ，设置30分钟
    min-evictable-idle-time-millis: 1800000
    #获取连接时候验证
    test-on-borrow: true
    # 配置监控统计拦截的filters，去掉后监控界面sql无法统计，'wall'用于防火墙
    filters: stat,wall,slf4j
    hikari:
      ## 最小空闲连接数量
      minimum-idle: 5
      ## 空闲连接存活最大时间，默认600000（10分钟）
      idle-timeout: 180000
      ## 连接池最大连接数，默认是10
      maximum-pool-size: 20
      ## 此属性控制从池返回的连接的默认自动提交行为,默认值：true
      auto-commit: true
      ## 连接池母子
      pool-name: MyHikariCP
      ## 此属性控制池中连接的最长生命周期，值0表示无限生命周期，默认1800000即30分钟
      max-lifetime: 1800000
      ## 数据库连接超时时间,默认30秒，即30000
      connection-timeout: 60000
      #connection-test-query: select 1
      connection-test-query: select 1 from dual

# 注册中心配置
eureka:
  client:
    service-url:
      defaultZone: http://amap:amap@127.0.0.1:58001/eureka/
  instance:
      prefer-ip-address: true
      instance-id: ${spring.cloud.client.ip-address}:${server.port}
      lease-expiration-duration-in-seconds: 30
      lease-renewal-interval-in-seconds: 10
# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'


encrypt:
  key: agreeAmap

